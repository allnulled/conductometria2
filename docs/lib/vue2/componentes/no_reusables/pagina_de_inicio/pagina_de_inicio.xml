<div class="pagina_de_inicio">
    <div class="capa_fija">
        <div class="capa_paneles_fijos">
            <div class="panel_fijo_intermedio">
                <div class="panel_contenedor">
                    <div class="panel_contenidos">
                        <div class="panel_contenedor">
                            <div class="panel_contenidos_interno">
                                <div class="panel_estadisticas" v-if="seccion_seleccionada === 'estad√≠sticas'" :class="{ inactivo: seccion_seleccionada !== 'estad√≠sticas' }">
                                    <div class="panel_estadisticas_contenido">
                                        <pagina-de-estadisticas :root="this" :datos-origen="interpretacion_de_script" />
                                    </div>
                                </div>
                                <div class="panel_editor" :class="{ inactivo: seccion_seleccionada !== 'editor' }">
                                    <div class="panel_editor_contenido">
                                        <textarea class="entrada_de_codigo"
                                            :class="{ [estado_de_script]: true }"
                                            ref="entrada_de_codigo_1"
                                            spellcheck="false"
                                            v-model="contenido_de_script"
                                            v-on:input="parsear_script_con_dilacion"
                                            v-on:keyup="actualizar_posicion_del_cursor"
                                            v-on:focus="actualizar_posicion_del_cursor"
                                            v-on:click="actualizar_posicion_del_cursor" />
                                    </div>
                                </div>
                                <div class="panel_consola_global" :class="{ inactivo: seccion_seleccionada !== 'consola' }">
                                    <div class="panel_consola_global_contenido" style="position: relative;">
                                        <textarea class="entrada_de_codigo consola_global"
                                            :class="{ [estado_de_script]: true }"
                                            style="font-family: monospace; font-size: 9px;"
                                            ref="entrada_de_codigo_de_consola_global"
                                            spellcheck="false"
                                            v-model="contenido_de_consola"
                                            v-on:input="() => {}"
                                            v-on:keyup="() => {}"
                                            v-on:focus="() => {}"
                                            v-on:click="() => {}" 
                                            placeholder="// Para borrar la base de datos de reportes:

delete localStorage.conductometria2_memoria_de_reportes"
                                        />
                                        <div style="position: absolute; top: 9px; right: 9px; left: auto; bottom: auto;">
                                            <button class="boton_transparente" style="min-width: 25px; font-size: 10px;" v-on:click="limpiar_codigo">üóëÔ∏è Reset</button>
                                            <button class="boton_transparente" style="min-width: 25px; font-size: 10px;" v-on:click="ejecutar_codigo">‚ö° Ejecutar</button>
                                        </div>
                                        <div style="position: absolute; top: 39px; right: 9px; left: 9px; bottom: auto; background-color: red; color: yellow; text-shadow: 0 0 1px black;" v-if="error_de_consola" v-on:click="() => {error_de_consola = undefined;}">
                                            {{ error_de_consola }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="panel_fijo_arriba">
                <div class="titulo_principal">
                    <span class="display_inline_block text_transform_uppercase">{{ seccion_seleccionada }}</span>
                    <span class="float_right">
                        <template v-if="estado_de_script === 'erroneo'">
                            <button class="boton" v-on:click="mostrar_error" style="min-width: 25px;">?</button>
                            <button class="boton" v-on:click="ir_a_error">Ir a error</button>
                        </template>
                        <button class="boton_pequenio_1" style="min-width: 20px;" v-on:click="ir_a_consola_global" :class="{ active: seccion_seleccionada === 'consola' }">üíª</button>
                        <button class="boton_pequenio_1" style="min-width: 20px;" v-on:click="ir_a_editor" :class="{ active: seccion_seleccionada === 'editor' }">üìÑ</button>
                        <button class="boton_pequenio_1" style="min-width: 20px;" v-on:click="ir_a_estadisticas" :class="{ active: seccion_seleccionada === 'estad√≠sticas' }" :disabled="estado_de_script !== 'corregido'">
                            <span v-if="seccion_seleccionada === 'estad√≠sticas'">üü°</span>
                            <span v-else-if="!((estado_de_script === 'corregido') && (seccion_seleccionada !== 'estad√≠sticas'))">üî¥</span>
                            <span v-else>üü¢</span>
                        </button>
                    </span>
                </div>
            </div>
            <div class="panel_fijo_abajo">
                <span style="color: white;padding-top: 5px;display: inline-block;" v-if="(seccion_seleccionada === 'editor') && posicion_del_cursor">
                    <span>
                        <template v-if="posicion_del_cursor.inicio.posicion === posicion_del_cursor.fin.posicion">
                            <span>Pos: </span> {{ posicion_del_cursor.inicio.posicion }} de {{ contenido_de_script.length }} | Coord: {{ posicion_del_cursor.inicio.linea }}:{{ posicion_del_cursor.inicio.columna }}
                        </template>
                        <template v-else>
                            Pos: {{ posicion_del_cursor.inicio.posicion }}-{{ posicion_del_cursor.fin.posicion }} | Coord: {{ posicion_del_cursor.inicio.linea }}:{{ posicion_del_cursor.inicio.columna }}-{{ posicion_del_cursor.fin.linea }}:{{ posicion_del_cursor.fin.columna }}
                        </template>
                    </span>
                </span>
                <span class="float_right text_align_right">
                    <template v-if="seccion_seleccionada === 'editor'">
                        <button class="boton min_width_0" v-on:click="alternar_familia_de_texto">F</button>
                        <button class="boton min_width_0" v-on:click="minimizar_texto">-</button>
                        <button class="boton min_width_0" v-on:click="maximizar_texto">+</button>
                    </template>
                </span>
            </div>
        </div>
    </div>
    <dialog id="dialogo_de_error_de_script">
        <div class="window">
            <div class="title-bar">
                <div class="title-bar-text">Mostrando error de script</div>
            </div>
            <div class="window-body has-space scrollable">
                <div>El error producido es el siguiente:</div>
                <pre class="cuadro_de_error">{{ JSON.stringify(error_de_script, null, 2) }}</pre>
                <div class="text_align_right">
                    <button class="" v-on:click="cerrar_error">De acuerdo</button>
                </div>
            </div>
            <div class="status-bar">
                <div class="status-field campo_de_estado_de_ventana">{{ error_de_script.name === "SyntaxError" ? "Es un error de sintaxis" : "No es un error de sintaxis" }}</div>
            </div>
        </div>
    </dialog>
</div>